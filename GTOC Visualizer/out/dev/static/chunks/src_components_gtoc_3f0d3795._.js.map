{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/luispostigo/Documents/Auburn_Research/Guzzetti/GTOC/GTOC_visualizer/GTOC_visualizer/GTOC%20Visualizer/src/components/gtoc/solutions/useSolutions.ts"],"sourcesContent":["import { create } from \"zustand\";\nimport { Solution } from \"./types\";\n\ntype Vec3 = [number, number, number];\n\ntype SolutionsState = {\n  solutions: Solution[];\n  visible: Record<string, boolean>;\n  importSolution: (file: File) => Promise<void>;\n  deleteSolution: (id: string) => Promise<void>;\n  toggle: (id: string) => void;\n  recolorSolution: (id: string, newColor: string) => void;\n  loadPersisted: () => Promise<void>;\n};\n\nexport const useSolutions = create<SolutionsState>((set, get) => ({\n  solutions: [],\n  visible: {},\n\n  loadPersisted: async () => {\n    console.log(\"[useSolutions] Local-only mode, skipping persistence\");\n    set({ solutions: [], visible: {} });\n  },\n\n  importSolution: async (file: File) => {\n    try {\n      const text = await file.text();\n      const lines = text\n        .split(\"\\n\")\n        .map((l) => l.trim())\n        .filter((l) => l && !l.startsWith(\"#\"));\n\n      let sol: Solution | null = null;\n      const joined = lines.join(\"\\n\");\n\n      try {\n        sol = JSON.parse(joined);\n      } catch {\n        const samples = lines\n          .map((line) => {\n            const nums = line.split(/[,\\s]+/).map(Number);\n            if (nums.length < 9 || nums.some((n) => Number.isNaN(n))) return null;\n\n            // GTOC layout: bodyId, flag, t, px, py, pz, vx, vy, vz, ...\n            const [bodyId, flag, t, px, py, pz, vx, vy, vz, ...rest] = nums;\n            const p: Vec3 = [px, py, pz];\n            const v: Vec3 = [vx, vy, vz];\n            const u: Vec3 =\n              rest.length >= 3 ? [rest[0], rest[1], rest[2]] : [0, 0, 0];\n\n            return { bodyId, flag, t, p, v, u };\n          })\n          .filter((s): s is NonNullable<typeof s> => !!s);\n\n        sol = {\n          id: file.name.replace(/\\.[^/.]+$/, \"\"),\n          name: file.name,\n          color: `hsl(${Math.floor(Math.random() * 360)}, 70%, 60%)`,\n          samples,\n        };\n      }\n\n      if (!sol?.samples?.length)\n        throw new Error(`Invalid or empty data in ${file.name}`);\n\n      set((state) => ({\n        solutions: [...state.solutions, sol!],\n        visible: { ...state.visible, [sol!.id]: true },\n      }));\n\n      console.log(\n        `[useSolutions] Imported \"${sol.name}\" (${sol.samples.length} samples)`\n      );\n    } catch (err) {\n      console.error(\"[useSolutions] importSolution error:\", err);\n      alert(`Failed to import solution: ${(err as Error).message}`);\n    }\n  },\n\n  deleteSolution: async (id: string) => {\n    console.log(`[useSolutions] Deleted ${id}`);\n    set((state) => ({\n      solutions: state.solutions.filter((s) => s.id !== id),\n      visible: Object.fromEntries(\n        Object.entries(state.visible).filter(([k]) => k !== id)\n      ),\n    }));\n  },\n\n  toggle: (id: string) =>\n    set((state) => ({\n      visible: { ...state.visible, [id]: !state.visible[id] },\n    })),\n\n  recolorSolution: (id, newColor) =>\n    set((state) => ({\n      solutions: state.solutions.map((s) =>\n        s.id === id ? { ...s, color: newColor } : s\n      ),\n    })),\n}));\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 113, "column": 0}, "map": {"version":3,"sources":["file:///Users/luispostigo/Documents/Auburn_Research/Guzzetti/GTOC/GTOC_visualizer/GTOC_visualizer/GTOC%20Visualizer/src/components/gtoc/solutions/SolutionsUI.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { HexColorPicker } from \"react-colorful\";\nimport { useSolutions } from \"./useSolutions\";\nimport type { Solution } from \"./types\";\n\n/* ---------- Floating color picker portal ---------- */\nfunction ColorPickerPortal({\n  anchorRef,\n  color,\n  onChange,\n  onClose,\n}: {\n  anchorRef: React.RefObject<HTMLElement>;\n  color: string;\n  onChange: (c: string) => void;\n  onClose: () => void;\n}) {\n  const pickerRef = useRef<HTMLDivElement | null>(null);\n  const [pos, setPos] = useState({ x: 0, y: 0 });\n  const [tempColor, setTempColor] = useState(color);\n\n  // üß≠ Smart positioning (prevent offscreen)\n  useEffect(() => {\n    const el = anchorRef.current;\n    if (!el) return;\n    const rect = el.getBoundingClientRect();\n    const pickerWidth = 200;\n    const pickerHeight = 190;\n    let x = rect.right + 10;\n    let y = rect.top;\n    if (x + pickerWidth > window.innerWidth) x = rect.left - pickerWidth - 10;\n    if (y + pickerHeight > window.innerHeight)\n      y = window.innerHeight - pickerHeight - 10;\n    setPos({ x, y });\n  }, [anchorRef]);\n\n  // üñ± Close on outside click\n  useEffect(() => {\n    const handleClick = (e: MouseEvent) => {\n      const target = e.target as Node;\n      if (\n        !anchorRef.current?.contains(target) &&\n        !pickerRef.current?.contains(target)\n      ) {\n        onClose();\n      }\n    };\n    window.addEventListener(\"mousedown\", handleClick);\n    return () => window.removeEventListener(\"mousedown\", handleClick);\n  }, [anchorRef, onClose]);\n\n  return (\n    <div\n      ref={pickerRef}\n      className=\"fixed z-[9999] p-3 rounded-xl bg-black/90 border border-white/10 shadow-2xl backdrop-blur-sm flex flex-col items-center space-y-2\"\n      style={{ left: pos.x, top: pos.y }}\n    >\n      <HexColorPicker color={tempColor} onChange={setTempColor} />\n      <div className=\"flex gap-2 mt-2\">\n        {/* ‚úÖ Save button ‚Äî commits and closes after small delay */}\n        <button\n          onClick={() => {\n            onChange(tempColor);\n            setTimeout(() => onClose(), 50); // ensures store updates before unmount\n          }}\n          className=\"px-3 py-1 rounded bg-green-500/80 hover:bg-green-400 text-white text-xs font-semibold shadow\"\n        >\n          Save\n        </button>\n\n        {/* ‚ùå Cancel button */}\n        <button\n          onClick={onClose}\n          className=\"px-3 py-1 rounded bg-red-500/60 hover:bg-red-400 text-white text-xs font-semibold shadow\"\n        >\n          Cancel\n        </button>\n      </div>\n    </div>\n  );\n}\n\n/* ---------- Main Solutions UI ---------- */\nexport default function SolutionsUI() {\n  const {\n    solutions,\n    visible,\n    importSolution,\n    toggle,\n    deleteSolution,\n    recolorSolution,\n  } = useSolutions() as any;\n\n  const [openPicker, setOpenPicker] = useState<string | null>(null);\n  const btnRefs = useRef<Record<string, HTMLButtonElement | null>>({});\n\n  return (\n    <div className=\"absolute top-3 right-3 z-[70] pointer-events-auto bg-black/70 border border-white/10 rounded-xl p-3 w-80 text-white\">\n      {/* Header */}\n      <div className=\"flex justify-between items-center mb-2\">\n        <h3 className=\"font-semibold text-sm\">Solutions</h3>\n        <label className=\"text-xs border border-white/20 rounded px-2 py-1 cursor-pointer hover:bg-white/10\">\n          Import\n          <input\n            type=\"file\"\n            accept=\".txt\"\n            className=\"hidden\"\n            onChange={(e) => {\n              const f = e.target.files?.[0];\n              if (f) importSolution(f);\n              e.target.value = \"\";\n            }}\n          />\n        </label>\n      </div>\n\n      {/* List */}\n      <div className=\"space-y-1 max-h-[60vh] overflow-y-auto pr-1\">\n        {solutions.map((s: Solution) => (\n          <div\n            key={s.id}\n            className=\"flex items-center justify-between border border-white/15 rounded px-2 py-1 text-xs hover:bg-white/5 transition-colors\"\n          >\n            <span className=\"truncate flex-1\">{s.name}</span>\n\n            {/* üé® Color button */}\n            <button\n              ref={(el) => {\n                btnRefs.current[s.id] = el;\n              }}\n              onClick={() =>\n                setOpenPicker(openPicker === s.id ? null : s.id)\n              }\n              className=\"w-4 h-4 rounded-full border border-white/30 mx-1\"\n              style={{ backgroundColor: s.color }}\n              title=\"Change color\"\n            />\n\n            {/* üëÅÔ∏è Visibility toggle */}\n            <button\n              onClick={() => toggle(s.id)}\n              className={`px-1 rounded border ${\n                visible[s.id]\n                  ? \"border-white/20 hover:bg-white/10\"\n                  : \"border-white/10 text-white/50 hover:bg-white/5\"\n              }`}\n            >\n              {visible[s.id] ? \"üëÅ\" : \"üö´\"}\n            </button>\n\n            {/* üóë Delete */}\n            <button\n              onClick={() => deleteSolution(s.id)}\n              className=\"px-1 rounded border border-red-400/40 text-red-300 hover:bg-red-400/20\"\n            >\n              ‚úï\n            </button>\n\n            {/* üé® Floating color picker */}\n            {openPicker === s.id && (\n              <ColorPickerPortal\n                anchorRef={{ current: btnRefs.current[s.id] as HTMLElement }}\n                color={s.color}\n                onChange={(c) => recolorSolution?.(s.id, c)}\n                onClose={() => setOpenPicker(null)}\n              />\n            )}\n          </div>\n        ))}\n\n        {solutions.length === 0 && (\n          <div className=\"text-white/50 text-xs\">No solutions loaded.</div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 381, "column": 0}, "map": {"version":3,"sources":["file:///Users/luispostigo/Documents/Auburn_Research/Guzzetti/GTOC/GTOC_visualizer/GTOC_visualizer/GTOC%20Visualizer/src/components/gtoc/utils/constants.ts"],"sourcesContent":["export const SYSTEM_NAME = \"Altaira System\";\n\n/* ===================== Universal Constants ===================== */\nexport const AU_KM = 149_597_870.691;        // kilometers per astronomical unit\nexport const SECONDS_PER_DAY = 86_400;       // seconds per day\nexport const DAYS_PER_YEAR = 365.25;         // mean solar days per year\nexport const ALTAIRA_GM = 139_348_062_043.343; // km¬≥/s¬≤ (gravitational parameter)\n\n/* ===================== Time References ===================== */\nexport const JD_SIM_START = 0;          // synthetic epoch for GTOC13 simulation\nexport const JD_EPOCH_0 = 2451545.0;    // reference epoch (display anchor only)\nexport const MILISECONDS_PER_DAY = 86_400_000;\n\n/* ===================== Solar Sail Parameters ===================== */\nexport const SAIL = {\n  FLUX_1AU: 5.4026e-6,  // N/m¬≤\n  AREA: 15_000,         // m¬≤\n  MASS: 500,            // kg\n} as const;\n\n/* ===================== Competition Parameters ===================== */\nexport const COMPETITION = {\n  MAX_YEARS: 200,\n  MIN_PERIHELION: 0.01, // AU\n  MAX_PERIHELION: 0.05, // AU\n} as const;\n\n/* ===================== Body Scientific Weights ===================== */\nexport const BODY_WEIGHTS: Record<number | string, number> = {\n  1: 0.1,    // Vulcan\n  2: 1,      // Yavin\n  3: 2,      // Eden\n  4: 3,      // Hoth\n  1000: 5,   // Yandi\n  5: 7,      // Beyonc√©\n  6: 10,     // Bespin\n  7: 15,     // Jotunn\n  8: 20,     // Wakonyingo\n  9: 35,     // Rogue 1\n  10: 50,    // Planet X\n  ASTEROIDS: 1,\n  COMETS: 3,\n};\n\n/* ===================== Time Bonus Parameters ===================== */\nexport const TIME_BONUS = {\n  EARLY: 1.13,\n  LATE_SLOPE: -0.005,\n  LATE_INTERCEPT: 1.165,\n} as const;\n\n/* ===================== Visualization Colors ===================== */\nexport const TYPE_COLORS: Record<\"Planet\" | \"Asteroid\" | \"Comet\", string> = {\n  Planet:  \"#6aa6ff\",\n  Asteroid:\"#bfbfbf\",\n  Comet:   \"#a0ffa0\",\n};\n\n/* ===================== Export Bundle ===================== */\nexport const CONSTANTS = {\n  AU_KM,\n  SECONDS_PER_DAY,\n  DAYS_PER_YEAR,\n  ALTAIRA_GM,\n  SAIL,\n  COMPETITION,\n  BODY_WEIGHTS,\n  TIME_BONUS,\n} as const;\n\nexport type Constants = typeof CONSTANTS;\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAO,MAAM,cAAc;AAGpB,MAAM,QAAQ,iBAAwB,mCAAmC;AACzE,MAAM,kBAAkB,QAAc,kBAAkB;AACxD,MAAM,gBAAgB,QAAgB,2BAA2B;AACjE,MAAM,aAAa,qBAAqB,mCAAmC;AAG3E,MAAM,eAAe,GAAY,wCAAwC;AACzE,MAAM,aAAa,WAAc,wCAAwC;AACzE,MAAM,sBAAsB;AAG5B,MAAM,OAAO;IAClB,UAAU;IACV,MAAM;IACN,MAAM;AACR;AAGO,MAAM,cAAc;IACzB,WAAW;IACX,gBAAgB;IAChB,gBAAgB;AAClB;AAGO,MAAM,eAAgD;IAC3D,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,MAAM;IACN,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,IAAI;IACJ,WAAW;IACX,QAAQ;AACV;AAGO,MAAM,aAAa;IACxB,OAAO;IACP,YAAY,CAAC;IACb,gBAAgB;AAClB;AAGO,MAAM,cAA+D;IAC1E,QAAS;IACT,UAAS;IACT,OAAS;AACX;AAGO,MAAM,YAAY;IACvB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;AACF","debugId":null}},
    {"offset": {"line": 471, "column": 0}, "map": {"version":3,"sources":["file:///Users/luispostigo/Documents/Auburn_Research/Guzzetti/GTOC/GTOC_visualizer/GTOC_visualizer/GTOC%20Visualizer/src/components/gtoc/solutions/SolutionPath.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useMemo, useState } from \"react\";\nimport * as THREE from \"three\";\nimport { Line } from \"@react-three/drei\";\nimport { AU_KM, SECONDS_PER_DAY } from \"@/components/gtoc/utils/constants\";\nimport { Solution } from \"./types\";\n\n/* ---------- Hover payload type ---------- */\nexport type HoverPayload = {\n  solutionName: string;\n  color: string;\n  legIndex: number;\n  fromBody?: number | null;\n  toBody?: number | null;\n  tofDays: number;\n};\n\n/* ---------- Props ---------- */\ntype Props = {\n  sol: Solution;\n  currentJD: number;\n  epochZeroJD: number;\n  showShip?: boolean;\n  onHover?: (data: HoverPayload, x: number, y: number) => void;\n  onUnhover?: () => void;\n};\n\n/* ============================================================= */\nexport default function SolutionPath({\n  sol,\n  currentJD,\n  epochZeroJD,\n  showShip,\n  onHover,\n  onUnhover,\n}: Props) {\n  if (!sol?.samples?.length) return null;\n\n  // --- Detect AU vs km ---\n  const medianR = (() => {\n    const mags = sol.samples\n      .map((s) => Math.hypot(...s.p))\n      .filter((m) => Number.isFinite(m))\n      .sort((a, b) => a - b);\n    return mags[Math.floor(mags.length / 2)] || 1;\n  })();\n  const SCALE = medianR > 1e3 ? 1 / AU_KM : 1;\n\n  // --- Convert to 3D points ---\n  const pts = useMemo(\n    () =>\n      sol.samples\n        .map((s) => new THREE.Vector3(...s.p).multiplyScalar(SCALE))\n        .filter(\n          (v) =>\n            Number.isFinite(v.x) && Number.isFinite(v.y) && Number.isFinite(v.z)\n        ),\n    [sol.samples, SCALE]\n  );\n  if (pts.length < 2) return null;\n\n  // --- Continuous progress interpolation ---\n  const elapsed = (currentJD - epochZeroJD) * SECONDS_PER_DAY;\n  const times = sol.samples.map((s) => s.t);\n\n  let idx = times.findIndex((t, i) => elapsed >= t && elapsed <= times[i + 1]);\n  if (idx < 0) idx = Math.max(0, times.length - 2);\n\n  const t0 = times[idx];\n  const t1 = times[idx + 1];\n  const a = t1 > t0 ? (elapsed - t0) / (t1 - t0) : 0;\n\n  const shipPos = pts[idx].clone().lerp(pts[idx + 1], a);\n  const visiblePts = [...pts.slice(0, idx + 1), shipPos];\n\n  const baseColor = sol.color || \"#66d9e8\";\n\n  // --- Hovered leg state ---\n  const [hoveredLeg, setHoveredLeg] = useState<number | null>(null);\n\n    // --- Leg metadata (hover info) ---\n  const legs = useMemo(() => {\n      const out: {\n        fromBody: number;\n        toBody: number;\n        t0: number;\n        t1: number;\n        pts: THREE.Vector3[];\n      }[] = [];\n\n      if (!sol.samples.length) return out;\n\n      const scaled = sol.samples.map((s) => ({\n        t: s.t,\n        body: s.bodyId ?? 0,\n        v: new THREE.Vector3(...s.p).multiplyScalar(SCALE),\n      }));\n\n      let cur = {\n        fromBody: scaled[0].body,\n        toBody: scaled[0].body,\n        t0: scaled[0].t,\n        t1: scaled[0].t,\n        pts: [scaled[0].v],\n      };\n\n      for (let i = 1; i < scaled.length; i++) {\n        const s = scaled[i];\n        cur.pts.push(s.v);\n        cur.t1 = s.t;\n\n        // Detect a body transition\n        const nextBody = scaled[i + 1]?.body ?? s.body;\n        if (nextBody !== s.body) {\n          // Find the next distinct body ahead to serve as destination\n          const toBody =\n            scaled\n              .slice(i + 1)\n              .map((p) => p.body)\n              .find((b) => b !== s.body) ?? s.body;\n\n          cur.toBody = toBody;\n          out.push(cur);\n\n          // Start new leg\n          cur = {\n            fromBody: s.body,\n            toBody,\n            t0: s.t,\n            t1: s.t,\n            pts: [],\n          };\n        }\n      }\n\n      // Push the last leg if valid\n      if (cur.pts.length > 0) out.push(cur);\n\n      return out;\n    }, [sol.samples, SCALE]);\n\n\n  /* ============================================================= */\n  return (\n    <group>\n      {/* thin dashed outline of full orbit */}\n      <Line\n        points={pts}\n        color={baseColor}\n        lineWidth={0.2}\n        dashed\n        dashSize={0.02}\n        gapSize={0.02}\n        transparent\n        opacity={0.25}\n        toneMapped={false}\n      />\n\n      {/* visible trajectory so far */}\n      <Line\n        key={`${sol.id}-progress`}\n        points={visiblePts}\n        color={baseColor}\n        lineWidth={1.8}\n        transparent\n        opacity={0.95}\n        toneMapped={false}\n      />\n\n      {/* spacecraft marker */}\n      {showShip && (\n        <mesh position={shipPos}>\n          <sphereGeometry args={[0.05, 32, 32]} />\n          <meshBasicMaterial color={baseColor} toneMapped={false} />\n        </mesh>\n      )}\n\n      {/* hoverable legs + highlight */}\n      {legs.map((leg, i) => {\n        const tofDays = (leg.t1 - leg.t0) / SECONDS_PER_DAY;\n        const isHovered = hoveredLeg === i;\n\n        return (\n          <group key={`${sol.id}-leg-${i}`}>\n            {/* ‚ú® bright highlight when hovered */}\n            {isHovered && (\n              <Line\n                points={leg.pts}\n                color={baseColor}\n                lineWidth={4.2}\n                transparent\n                opacity={0.9}\n                toneMapped={false}\n              />\n            )}\n\n            {/* invisible hit zone for hover detection */}\n            <Line\n              points={leg.pts}\n              color={baseColor}\n              lineWidth={3.5}\n              transparent\n              opacity={0}\n              toneMapped={false}\n              onPointerOver={(e) => {\n                e.stopPropagation();\n                setHoveredLeg(i);\n                onHover?.(\n                  {\n                    solutionName: sol.name,\n                    color: baseColor,\n                    legIndex: i + 1,\n                    fromBody: leg.fromBody,\n                    toBody: leg.toBody,\n                    tofDays,\n                  },\n                  e.clientX,\n                  e.clientY\n                );\n              }}\n              onPointerOut={(e) => {\n                e.stopPropagation();\n                setHoveredLeg(null);\n                onUnhover?.();\n              }}\n            />\n          </group>\n        );\n      })}\n    </group>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 706, "column": 0}, "map": {"version":3,"sources":["file:///Users/luispostigo/Documents/Auburn_Research/Guzzetti/GTOC/GTOC_visualizer/GTOC_visualizer/GTOC%20Visualizer/src/components/gtoc/solutions/Solutions3D.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport { useSolutions } from \"./useSolutions\";\nimport SolutionPath, { HoverPayload } from \"./SolutionPath\";\n\nexport default function Solutions3D({\n  currentJD,\n  epochZeroJD,\n  showShip,\n  onHover,\n  onUnhover,\n}: {\n  currentJD: number;\n  epochZeroJD: number;\n  showShip?: boolean;\n  onHover?: (data: HoverPayload, x: number, y: number) => void;\n  onUnhover?: () => void;\n}) {\n  const { solutions, visible } = useSolutions();\n\n  return (\n    <>\n      {solutions.map(\n        (s) =>\n          visible[s.id] && (\n            <SolutionPath\n              key={s.id}\n              sol={s}\n              currentJD={currentJD}\n              epochZeroJD={epochZeroJD}\n              showShip={showShip}\n              onHover={onHover}\n              onUnhover={onUnhover}\n            />\n          )\n      )}\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;;;AAJA;;;AAMe,SAAS,YAAY,EAClC,SAAS,EACT,WAAW,EACX,QAAQ,EACR,OAAO,EACP,SAAS,EAOV;;IACC,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,IAAA,yKAAY;IAE3C,qBACE;kBACG,UAAU,GAAG,CACZ,CAAC,IACC,OAAO,CAAC,EAAE,EAAE,CAAC,kBACX,6LAAC,qKAAY;gBAEX,KAAK;gBACL,WAAW;gBACX,aAAa;gBACb,UAAU;gBACV,SAAS;gBACT,WAAW;eANN,EAAE,EAAE;;;;;;AAYvB;GAjCwB;;QAaS,yKAAY;;;KAbrB","debugId":null}},
    {"offset": {"line": 751, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 760, "column": 0}, "map": {"version":3,"sources":["file:///Users/luispostigo/Documents/Auburn_Research/Guzzetti/GTOC/GTOC_visualizer/GTOC_visualizer/GTOC%20Visualizer/src/components/gtoc/solutions/index.ts"],"sourcesContent":["export { default as SolutionsUI } from \"./SolutionsUI\";\nexport { default as Solutions3D } from \"./Solutions3D\";\nexport { default as SolutionPath } from \"./SolutionPath\";\nexport * from \"./types\";\nexport * from \"./useSolutions\";\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA","debugId":null}},
    {"offset": {"line": 796, "column": 0}, "map": {"version":3,"sources":["file:///Users/luispostigo/Documents/Auburn_Research/Guzzetti/GTOC/GTOC_visualizer/GTOC_visualizer/GTOC%20Visualizer/src/components/gtoc/sceneParts/HUD.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\n\ntype Props = {\n  jd: number;\n  setJD: (v: number | ((prev: number) => number)) => void;\n  isPlaying: boolean;\n  setPlaying: (v: boolean) => void;\n  rate: number;\n  setRate: (v: number) => void;\n  jdMin: number;\n  jdMax: number;\n  milestonesJD: number[];\n  milestonesISO: string[];\n  candidates?: Array<{ id: string; name: string }>;\n};\n\nconst clamp = (x: number, a: number, b: number) => Math.max(a, Math.min(b, x));\nconst lerp = (a: number, b: number, t: number) => a + (b - a) * t;\n\nconst RAIL_HEIGHT_PX = 6;\nconst RAIL_BOTTOM_PX = 16;\nconst RAIL_CENTER_BOTTOM_PX = RAIL_BOTTOM_PX + RAIL_HEIGHT_PX / 2;\n\nfunction jdToDate(jd: number) {\n  const ms = (jd - 2440587.5) * 86400000;\n  return new Date(ms);\n}\nfunction dateToJD(d: Date) {\n  return d.getTime() / 86400000 + 2440587.5;\n}\nfunction jdToISO(jd: number) {\n  return jdToDate(jd).toISOString().replace(\".000Z\", \"Z\");\n}\nconst isoShort = (iso: string) => iso.slice(0, 10);\n\ntype Marker = { jd: number; label?: string; kind: \"start\" | \"end\" | \"major\" | \"minor\" | \"custom\" };\n\nfunction buildTimeGrid(jdMin: number, jdMax: number, custom: Marker[]): Marker[] {\n  const start = jdToDate(jdMin);\n  const end = jdToDate(jdMax);\n  const y0 = start.getUTCFullYear();\n  const y1 = end.getUTCFullYear();\n\n  const first25 = Math.floor(y0 / 25) * 25;\n  const last25 = Math.ceil(y1 / 25) * 25;\n\n  const grid: Marker[] = [\n    { jd: jdMin, label: isoShort(jdToISO(jdMin)), kind: \"start\" },\n    { jd: jdMax, label: isoShort(jdToISO(jdMax)), kind: \"end\" },\n  ];\n\n  const yearBufferJD = 365.25;\n  for (let y = first25; y <= last25; y += 25) {\n    const d = new Date(Date.UTC(y, 0, 1));\n    const mJD = dateToJD(d);\n    if (mJD <= jdMin + yearBufferJD || mJD >= jdMax - yearBufferJD) continue;\n    const isCentury = y % 100 === 0;\n    grid.push({ jd: mJD, label: String(y), kind: isCentury ? \"major\" : \"minor\" });\n  }\n\n  const dedupTol = (jdMax - jdMin) * 1e-4;\n  for (const m of custom) {\n    if (!grid.some((g) => Math.abs(g.jd - m.jd) < dedupTol)) grid.push(m);\n  }\n\n  grid.sort((a, b) => a.jd - b.jd);\n  return grid;\n}\n\n/* ---------- Icons ---------- */\n\nconst IconPlay = () => (\n  <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\">\n    <path d=\"M7 5l12 7-12 7V5z\" fill=\"currentColor\" />\n  </svg>\n);\nconst IconPause = () => (\n  <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\">\n    <path d=\"M8 6h3v12H8zM13 6h3v12h-3z\" fill=\"currentColor\" />\n  </svg>\n);\nconst IconPrev = () => (\n  <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\">\n    <path d=\"M7 6h2v12H7zM21 18L9 12l12-6v12z\" fill=\"currentColor\" />\n  </svg>\n);\nconst IconNext = () => (\n  <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\">\n    <path d=\"M15 6h2v12h-2zM3 18l12-6L3 6v12z\" fill=\"currentColor\" />\n  </svg>\n);\nconst IconSpeed = () => (\n  <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\">\n    <circle cx=\"12\" cy=\"12\" r=\"8.5\" stroke=\"currentColor\" strokeWidth=\"1.5\" fill=\"none\" />\n    <path d=\"M12 12l4-4\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\n  </svg>\n);\nconst IconCalendar = () => (\n  <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\">\n    <rect x=\"3\" y=\"5\" width=\"18\" height=\"16\" rx=\"2\" stroke=\"currentColor\" strokeWidth=\"1.5\" fill=\"none\" />\n    <path d=\"M8 3v4M16 3v4M3 10h18\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n  </svg>\n);\n\n/**\n * Heads-Up Display (HUD) for time control and mission timeline.\n * Provides interactive JD scrubbing, playback, and time-step control.\n */\nexport default function HUD({\n  jd,\n  setJD,\n  isPlaying,\n  setPlaying,\n  rate,\n  setRate,\n  jdMin,\n  jdMax,\n  milestonesJD,\n  milestonesISO,\n}: Props) {\n  const railRef = useRef<HTMLDivElement>(null);\n  const knobRef = useRef<HTMLDivElement>(null);\n  const [isScrubbing, setScrubbing] = useState(false);\n  const [stepDays, setStepDays] = useState(rate);\n\n  useEffect(() => setStepDays(rate), [rate]);\n\n  const pct = useMemo(\n    () => (jdMax > jdMin ? ((jd - jdMin) / (jdMax - jdMin)) * 100 : 0),\n    [jd, jdMin, jdMax]\n  );\n\n  const customMarkers = useMemo<Marker[]>(\n    () =>\n      milestonesJD.map((mjd, i) => ({\n        jd: mjd,\n        label: milestonesISO[i],\n        kind: \"custom\" as const,\n      })),\n    [milestonesJD, milestonesISO]\n  );\n\n  const markers = useMemo(\n    () => buildTimeGrid(jdMin, jdMax, customMarkers),\n    [jdMin, jdMax, customMarkers]\n  );\n\n  useEffect(() => {\n    if (knobRef.current) knobRef.current.tabIndex = 0;\n  }, []);\n\n  const updateFromClientX = useCallback(\n    (clientX: number) => {\n      const rail = railRef.current;\n      if (!rail) return;\n      const rect = rail.getBoundingClientRect();\n      const p = clamp((clientX - rect.left) / rect.width, 0, 1);\n      setJD(lerp(jdMin, jdMax, p));\n    },\n    [jdMin, jdMax, setJD]\n  );\n\n  const onPointerDownRail = (e: React.PointerEvent) => {\n    (e.currentTarget as HTMLElement).setPointerCapture(e.pointerId);\n    setScrubbing(true);\n    updateFromClientX(e.clientX);\n  };\n  const onPointerMoveRail = (e: React.PointerEvent) => {\n    if (isScrubbing) updateFromClientX(e.clientX);\n  };\n  const onPointerUpRail = (e: React.PointerEvent) => {\n    (e.currentTarget as HTMLElement).releasePointerCapture(e.pointerId);\n    setScrubbing(false);\n  };\n\n  const onWheel = (e: React.WheelEvent) => {\n    e.preventDefault();\n    const delta = (jdMax - jdMin) * (e.deltaY < 0 ? -0.0015 : 0.0015);\n    setJD((prev) => clamp(prev + delta, jdMin, jdMax));\n  };\n\n  const onKeyDownKnob = (e: React.KeyboardEvent) => {\n    if (e.key === \"ArrowLeft\") setJD((prev) => clamp(prev - stepDays, jdMin, jdMax));\n    else if (e.key === \"ArrowRight\") setJD((prev) => clamp(prev + stepDays, jdMin, jdMax));\n    else if (e.key === \" \") {\n      e.preventDefault();\n      setPlaying(!isPlaying);\n    }\n  };\n\n  const jumpTo = (mjd: number) => setJD(clamp(mjd, jdMin, jdMax));\n  const leftPct = (mjd: number) => (jdMax > jdMin ? ((mjd - jdMin) / (jdMax - jdMin)) * 100 : 0);\n\n  return (\n    <div\n      className=\"fixed inset-x-0 bottom-0 z-[9999] pb-[max(env(safe-area-inset-bottom),0px)] text-white select-none\"\n      role=\"region\"\n      aria-label=\"Time controls\"\n    >\n      {/* Timeline markers */}\n      <div className=\"max-w-[1400px] mx-auto px-4 pt-1\">\n        <div className=\"relative\" style={{ height: 40 + RAIL_CENTER_BOTTOM_PX }}>\n          <div className=\"absolute inset-x-0\" style={{ bottom: RAIL_CENTER_BOTTOM_PX, height: 0 }}>\n            {markers.map(({ jd: mjd, label, kind }, i) => {\n              const pos = leftPct(mjd);\n              const isCustom = kind === \"custom\";\n              const isStart = kind === \"start\";\n              const isEnd = kind === \"end\";\n              const tickDown = 6;\n              const tickColor = isStart || isEnd ? \"bg-white\" : isCustom ? \"bg-emerald-300\" : \"bg-white/65\";\n              const textColor = isCustom\n                ? \"text-emerald-200\"\n                : isStart || isEnd\n                ? \"text-white/90\"\n                : \"text-white/70\";\n\n              const text =\n                label ??\n                (isStart || isEnd\n                  ? isoShort(jdToISO(mjd))\n                  : String(jdToDate(mjd).getUTCFullYear()));\n\n              return (\n                <div\n                  key={`${kind}-${i}-${mjd}`}\n                  className=\"absolute -translate-x-1/2\"\n                  style={{ left: `${pos}%` }}\n                >\n                  <div className={`w-[1px] ${tickColor}`} style={{ height: tickDown }} />\n                  <div\n                    className={`absolute left-1/2 -translate-x-1/2 -translate-y-[calc(100%-4px)] text-[10px] leading-3 whitespace-nowrap ${textColor}`}\n                    style={{ bottom: tickDown }}\n                    title={text}\n                  >\n                    {text}\n                  </div>\n                  <button\n                    className=\"absolute -left-2 -top-6 w-4 h-[28px] pointer-events-auto\"\n                    title={label ?? jdToISO(mjd)}\n                    aria-label={`Jump to ${label ?? jdToISO(mjd)}`}\n                    onClick={() => jumpTo(mjd)}\n                  />\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n\n      {/* Timeline rail */}\n      <div className=\"max-w-[1400px] mx-auto px-4\">\n        <div ref={railRef} className=\"relative cursor-pointer\" style={{ height: RAIL_BOTTOM_PX + RAIL_HEIGHT_PX }}>\n          <div\n            className=\"absolute inset-x-0 rounded-full bg-white/12 hover:bg-white/16 transition-colors\"\n            style={{ bottom: RAIL_BOTTOM_PX, height: RAIL_HEIGHT_PX }}\n            onPointerDown={onPointerDownRail}\n            onPointerMove={onPointerMoveRail}\n            onPointerUp={onPointerUpRail}\n            onWheel={onWheel}\n          >\n            <div className=\"absolute inset-y-0 left-0 rounded-l-full bg-white/35\" style={{ width: `${pct}%` }} />\n            <div\n              ref={knobRef}\n              className=\"absolute top-1/2 -translate-y-1/2 h-3 w-3 rounded-full bg-white shadow ring-2 ring-black/30\"\n              style={{ left: `calc(${pct}% - 6px)` }}\n              tabIndex={0}\n              onKeyDown={onKeyDownKnob}\n            />\n          </div>\n        </div>\n      </div>\n\n      {/* Control bar */}\n      <div className=\"max-w-[1400px] mx-auto px-4 pb-2\">\n        <div className=\"grid grid-cols-[1fr_auto_1fr] items-center gap-4\">\n          <div className=\"flex items-center gap-3 min-w-0\">\n            <div className=\"flex items-center gap-2 text-sm text-white/90\">\n              <IconCalendar />\n              <span className=\"tabular-nums\">{isoShort(jdToISO(jd))}</span>\n            </div>\n          </div>\n\n          <div className=\"flex items-center justify-center gap-2\">\n            <button\n              onClick={() => setJD((p) => clamp(p - stepDays, jdMin, jdMax))}\n              className=\"h-8 px-2 rounded-md border border-white/15 hover:bg-white/10 text-white/90\"\n            >\n              <IconPrev />\n            </button>\n            <button\n              onClick={() => setPlaying(!isPlaying)}\n              className=\"h-8 w-8 rounded-full bg-white/20 hover:bg-white/30 border border-white/25 flex items-center justify-center\"\n            >\n              {isPlaying ? <IconPause /> : <IconPlay />}\n            </button>\n            <button\n              onClick={() => setJD((p) => clamp(p + stepDays, jdMin, jdMax))}\n              className=\"h-8 px-2 rounded-md border border-white/15 hover:bg-white/10 text-white/90\"\n            >\n              <IconNext />\n            </button>\n          </div>\n\n          <div className=\"flex items-center justify-end gap-4\">\n            <div className=\"hidden md:flex items-center gap-2 text-white/90\">\n              <IconSpeed />\n              <input\n                type=\"range\"\n                min={1}\n                max={1000}\n                step={1}\n                value={clamp(Math.round(rate), 1, 1000)}\n                onChange={(e) => setRate(parseInt(e.target.value, 10))}\n                className=\"w-48 accent-white\"\n              />\n            </div>\n            <div className=\"hidden sm:flex items-center gap-2 text-xs text-white/80\">\n              <span>Step</span>\n              <input\n                type=\"number\"\n                className=\"w-25 bg-transparent border border-white/15 rounded px-2 py-1 text-right [color-scheme:dark] text-white tracking-wide\"\n                min={1}\n                max={3650}\n                value={stepDays}\n                onChange={(e) => {\n                  const newVal = clamp(parseInt(e.target.value || \"1\", 10), 1, 3650);\n                  setStepDays(newVal);\n                  setRate(newVal);\n                }}\n              />\n              <span>d</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1424, "column": 0}, "map": {"version":3,"sources":["file:///Users/luispostigo/Documents/Auburn_Research/Guzzetti/GTOC/GTOC_visualizer/GTOC_visualizer/GTOC%20Visualizer/src/components/gtoc/stores/planetStore.ts"],"sourcesContent":["import { create } from \"zustand\";\n\ntype Planet = {\n  id: number | string;\n  name: string;\n  color: string;\n  type?: string;\n};\n\ntype PlanetStore = {\n  planets: Planet[];\n  selectedBodies: string[];\n  setPlanets: (list: Planet[]) => void;\n  togglePlanet: (idOrName: string) => void;\n  clearAll: () => void;\n};\n\nexport const usePlanetStore = create<PlanetStore>((set, get) => ({\n  planets: [],\n  selectedBodies: [],\n\n  setPlanets: (list) => set({ planets: list }),\n\n  togglePlanet: (idOrName) => {\n    const selected = get().selectedBodies;\n    set({\n      selectedBodies: selected.includes(idOrName)\n        ? selected.filter((n) => n !== idOrName)\n        : [...selected, idOrName],\n    });\n  },\n\n  clearAll: () => set({ selectedBodies: [] }),\n}));\n"],"names":[],"mappings":";;;;AAAA;;AAiBO,MAAM,iBAAiB,IAAA,qJAAM,EAAc,CAAC,KAAK,MAAQ,CAAC;QAC/D,SAAS,EAAE;QACX,gBAAgB,EAAE;QAElB,YAAY,CAAC,OAAS,IAAI;gBAAE,SAAS;YAAK;QAE1C,cAAc,CAAC;YACb,MAAM,WAAW,MAAM,cAAc;YACrC,IAAI;gBACF,gBAAgB,SAAS,QAAQ,CAAC,YAC9B,SAAS,MAAM,CAAC,CAAC,IAAM,MAAM,YAC7B;uBAAI;oBAAU;iBAAS;YAC7B;QACF;QAEA,UAAU,IAAM,IAAI;gBAAE,gBAAgB,EAAE;YAAC;IAC3C,CAAC","debugId":null}},
    {"offset": {"line": 1456, "column": 0}, "map": {"version":3,"sources":["file:///Users/luispostigo/Documents/Auburn_Research/Guzzetti/GTOC/GTOC_visualizer/GTOC_visualizer/GTOC%20Visualizer/src/components/gtoc/sceneParts/BodyPoint.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useRef, useState, useMemo } from \"react\";\nimport * as THREE from \"three\";\nimport { useFrame, useThree } from \"@react-three/fiber\";\nimport { Html } from \"@react-three/drei\";\nimport type { Body } from \"@/components/gtoc/utils/dataLoader\";\nimport { JD_EPOCH_0 } from \"@/components/gtoc/utils/constants\";\nimport { usePlanetStore } from \"@/components/gtoc/stores/planetStore\";\n\n/* ---------- Rotation Matrix ---------- */\nfunction pqwToIJK(Œ©: number, i: number, œâ: number) {\n  const cO = Math.cos(Œ©), sO = Math.sin(Œ©);\n  const ci = Math.cos(i), si = Math.sin(i);\n  const cw = Math.cos(œâ), sw = Math.sin(œâ);\n\n  return new THREE.Matrix3().set(\n    cO * cw - sO * sw * ci,\n    -cO * sw - sO * cw * ci,\n    sO * si,\n    sO * cw + cO * sw * ci,\n    -sO * sw + cO * cw * ci,\n    -cO * si,\n    sw * si,\n    cw * si,\n    ci\n  );\n}\n\n/* ---------- Kepler Solver ---------- */\nfunction solveE(M: number, e: number) {\n  const Mp = Math.atan2(Math.sin(M), Math.cos(M));\n  let E = Mp;\n  for (let k = 0; k < 8; k++) E = Mp + e * Math.sin(E);\n  return E;\n}\n\n/* ---------- Main Component ---------- */\nexport default function BodyPoint({\n  body,\n  jd,\n  showLabel = false,\n}: {\n  body: Body;\n  jd: number;\n  showLabel?: boolean;\n}) {\n  const meshRef = useRef<THREE.Group>(null!);\n  const { camera } = useThree();\n  const [hovered, setHovered] = useState(false);\n\n  // --- Planet store integration\n  const { selectedBodies } = usePlanetStore.getState();\n  const idOrName = String(body.name && body.name !== \"None\" ? body.name : body.id);\n  const isSelected = selectedBodies.includes(idOrName);\n\n  const displayName = body.name && body.name !== \"None\" ? body.name : `#${body.id}`;\n\n  const e = Number.isFinite(body.e) ? body.e : 0;\n  const a_AU = Number.isFinite(body.a_AU) ? Math.max(1e-6, body.a_AU) : 1;\n  const Œ© = Number.isFinite(body.Omega) ? body.Omega : 0;\n  const i = Number.isFinite(body.inc) ? body.inc : 0;\n  const œâ = Number.isFinite(body.omega) ? body.omega : 0;\n  const M0 = Number.isFinite(body.M0) ? body.M0 : 0;\n  const epochJD = Number.isFinite((body as any).epoch_JD) ? (body as any).epoch_JD : JD_EPOCH_0;\n\n  const R = useMemo(() => pqwToIJK(Œ©, i, œâ), [Œ©, i, œâ]);\n\n  /* ---------- Orbit path (for hover only) ---------- */\n  const orbitGeom = useMemo(() => {\n    if (e >= 1) return null;\n    const segments = 256;\n    const pts: THREE.Vector3[] = [];\n    for (let k = 0; k <= segments; k++) {\n      const M = (2 * Math.PI * k) / segments;\n      const E = solveE(M, e);\n      const r = a_AU * (1 - e * Math.cos(E));\n      const cosŒΩ = (Math.cos(E) - e) / (1 - e * Math.cos(E));\n      const sinŒΩ = (Math.sqrt(1 - e ** 2) * Math.sin(E)) / (1 - e * Math.cos(E));\n      const v = new THREE.Vector3(r * cosŒΩ, r * sinŒΩ, 0).applyMatrix3(R);\n      pts.push(v);\n    }\n    return new THREE.BufferGeometry().setFromPoints(pts);\n  }, [a_AU, e, R]);\n\n  /* ---------- Position update ---------- */\n  useFrame(() => {\n    if (!meshRef.current) return;\n    const n = (2 * Math.PI) / (Math.sqrt(a_AU ** 3) * 365.25);\n    const M = M0 + n * (jd - epochJD);\n    const E = solveE(M, e);\n\n    const r = a_AU * (1 - e * Math.cos(E));\n    const cosŒΩ = (Math.cos(E) - e) / (1 - e * Math.cos(E));\n    const sinŒΩ = (Math.sqrt(1 - e * e) * Math.sin(E)) / (1 - e * Math.cos(E));\n    const pos = new THREE.Vector3(r * cosŒΩ, r * sinŒΩ, 0).applyMatrix3(R);\n    meshRef.current.position.copy(pos);\n  });\n\n  const distance = camera.position.length();\n  const opacity = Math.max(0.6, 1 - distance / 20);\n  const bodyColor = body.color ?? \"#ffffff\";\n\n  return (\n    <>\n      {/* --- Orbit visible when hovered --- */}\n      {hovered && orbitGeom && (\n        <primitive\n          object={\n            new THREE.Line(\n              orbitGeom,\n              new THREE.LineBasicMaterial({\n                color: bodyColor,\n                transparent: true,\n                opacity: 0.7,\n              })\n            )\n          }\n          frustumCulled={false}\n        />\n      )}\n\n      {/* --- Body marker --- */}\n      <group\n        ref={meshRef}\n        onPointerOver={() => setHovered(true)}\n        onPointerOut={() => setHovered(false)}\n      >\n        <mesh frustumCulled={false}>\n          <sphereGeometry args={[0.015, 16, 16]} />\n          <meshStandardMaterial\n            color={isSelected ? \"#ffd500\" : bodyColor}\n            emissive={isSelected ? \"#ffd500\" : hovered ? bodyColor : \"#000000\"}\n            emissiveIntensity={isSelected ? 0.7 : hovered ? 0.4 : 0}\n          />\n        </mesh>\n\n        {/* --- Always visible label for selected bodies --- */}\n        {(showLabel && body.type === \"Planet\") || isSelected ? (\n          <Html center position={[0, 0.07, 0]} style={{ pointerEvents: \"none\" }}>\n            <div\n              className=\"rounded-md font-semibold select-none\"\n              style={{\n                padding: \"3px 6px\",\n                fontSize: isSelected ? \"18px\" : \"11px\",\n                color: isSelected ? bodyColor : \"#eee\",\n                background: isSelected\n                  ? \"rgba(0,0,0,0.4)\"\n                  : \"rgba(0,0,0,0.25)\",\n                border: \"1px solid rgba(255,255,255,0.1)\",\n                textShadow: `0 0 10px ${bodyColor}88`,\n                backdropFilter: \"blur(6px)\",\n                transition: \"all 0.25s ease\",\n                opacity,\n              }}\n            >\n              {displayName}\n            </div>\n          </Html>\n        ) : null}\n\n        {/* --- Hover info popup --- */}\n        {hovered && (\n          <Html center position={[0, 0.1, 0]}>\n            <div\n              className=\"p-2 rounded-lg text-[11px] leading-tight text-white backdrop-blur-md \n                         bg-black/60 border border-white/10 shadow-lg whitespace-nowrap select-none\"\n            >\n              <div className=\"font-semibold text-[#ffd500]\">{displayName}</div>\n              <div className=\"text-gray-300\">{body.type}</div>\n              <div className=\"mt-1 text-[10px] text-gray-400\">\n                a={a_AU.toFixed(3)} AU<br />\n                e={e.toFixed(3)}<br />\n                i={( (i * 180) / Math.PI ).toFixed(2)}¬∞<br />\n                Œ©={( (Œ© * 180) / Math.PI ).toFixed(2)}¬∞<br />\n                œâ={( (œâ * 180) / Math.PI ).toFixed(2)}¬∞<br />\n                M‚ÇÄ={( (M0 * 180) / Math.PI ).toFixed(2)}¬∞\n              </div>\n            </div>\n          </Html>\n        )}\n      </group>\n    </>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1745, "column": 0}, "map": {"version":3,"sources":["file:///Users/luispostigo/Documents/Auburn_Research/Guzzetti/GTOC/GTOC_visualizer/GTOC_visualizer/GTOC%20Visualizer/src/components/gtoc/KeplerSolver.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useThree, useFrame } from \"@react-three/fiber\";\nimport { Html, Line } from \"@react-three/drei\";\nimport * as THREE from \"three\";\nimport { usePlanetStore } from \"@/components/gtoc/stores/planetStore\";\nimport {\n  TYPE_COLORS,\n  AU_KM,\n  SECONDS_PER_DAY,\n  ALTAIRA_GM,\n} from \"@/components/gtoc/utils/constants\";\n\n/* ======================= Types ======================= */\nexport type BodyType = \"Planet\" | \"Asteroid\" | \"Comet\";\n\nexport interface Body {\n  id: string;\n  name: string;\n  type: BodyType;\n  a_AU: number;\n  e: number;\n  inc: number;\n  Omega: number;\n  omega: number;\n  M0: number;\n  epoch_JD: number;\n  color?: string;\n}\n\n/* ======================= Kepler Solver ======================= */\nexport function solveKepler(M: number, e: number, tol = 1e-10, maxIter = 50): number {\n  if (e < 1) {\n    let E = M;\n    for (let k = 0; k < maxIter; k++) {\n      const f = E - e * Math.sin(E) - M;\n      const fp = 1 - e * Math.cos(E);\n      const d = f / fp;\n      E -= d;\n      if (Math.abs(d) < tol) break;\n    }\n    return E;\n  }\n\n  if (e === 1) return M;\n\n  let H = Math.log((2 * Math.abs(M)) / e + 1.8);\n  for (let k = 0; k < maxIter; k++) {\n    const sH = Math.sinh(H);\n    const cH = Math.cosh(H);\n    const f = e * sH - H - M;\n    const fp = e * cH - 1;\n    const d = f / fp;\n    H -= d;\n    if (Math.abs(d) < tol) break;\n  }\n  return H;\n}\n\n/** Computes heliocentric position in AU from orbital elements and Julian date. */\nexport function keplerToPositionAU(body: Body, jd: number): THREE.Vector3 {\n  const { a_AU, e, inc, Omega, omega, M0, epoch_JD } = body;\n  const a_km = a_AU * AU_KM;\n  const n = Math.sqrt(ALTAIRA_GM / (a_km ** 3));\n  const dt_s = (jd - epoch_JD) * SECONDS_PER_DAY;\n\n  let M = M0 + n * dt_s;\n  if (e < 1) M = ((M + Math.PI) % (2 * Math.PI)) - Math.PI;\n\n  const EorH = solveKepler(M, e);\n  let r_km: number, f_true: number;\n\n  if (e < 1) {\n    const E = EorH;\n    const cosE = Math.cos(E);\n    const sinE = Math.sin(E);\n    const denom = 1 - e * cosE;\n    r_km = a_km * denom;\n    const cosf = (cosE - e) / denom;\n    const sinf = (Math.sqrt(1 - e ** 2) * sinE) / denom;\n    f_true = Math.atan2(sinf, cosf);\n  } else {\n    const H = EorH;\n    const coshH = Math.cosh(H);\n    const sinhH = Math.sinh(H);\n    const denom = e * coshH - 1;\n    r_km = a_km * denom;\n    const cosf = (e - coshH) / denom;\n    const sinf = (Math.sqrt(e ** 2 - 1) * sinhH) / denom;\n    f_true = Math.atan2(sinf, cosf);\n  }\n\n  const cO = Math.cos(Omega),\n    sO = Math.sin(Omega),\n    ci = Math.cos(inc),\n    si = Math.sin(inc),\n    co = Math.cos(omega),\n    so = Math.sin(omega);\n\n  const R11 = cO * co - sO * so * ci;\n  const R12 = -cO * so - sO * co * ci;\n  const R21 = sO * co + cO * so * ci;\n  const R22 = -sO * so + cO * co * ci;\n  const R31 = so * si;\n  const R32 = co * si;\n\n  const x_peri = r_km * Math.cos(f_true);\n  const y_peri = r_km * Math.sin(f_true);\n\n  const x = (R11 * x_peri + R12 * y_peri) / AU_KM;\n  const y = (R21 * x_peri + R22 * y_peri) / AU_KM;\n  const z = (R31 * x_peri + R32 * y_peri) / AU_KM;\n\n  return new THREE.Vector3(x, y, z);\n}\n\n/* ======================= Scene Components ======================= */\nexport function OrbitPath({\n  body,\n  visible = true,\n  segments = 256,\n  color,\n  isSelected = false,\n}: {\n  body: Body;\n  visible?: boolean;\n  segments?: number;\n  color?: string;\n  isSelected?: boolean;\n}) {\n  if (!visible) return null;\n\n  const points = useMemo(() => {\n    const a = body.a_AU;\n    const e = body.e;\n    if (!Number.isFinite(a) || a <= 0 || !Number.isFinite(e) || e >= 1) return [];\n\n    const pts: THREE.Vector3[] = [];\n    const a_km = a * AU_KM;\n\n    const cO = Math.cos(body.Omega),\n      sO = Math.sin(body.Omega),\n      ci = Math.cos(body.inc),\n      si = Math.sin(body.inc),\n      co = Math.cos(body.omega),\n      so = Math.sin(body.omega);\n\n    const R11 = cO * co - sO * so * ci;\n    const R12 = -cO * so - sO * co * ci;\n    const R21 = sO * co + cO * so * ci;\n    const R22 = -sO * so + cO * co * ci;\n    const R31 = so * si;\n    const R32 = co * si;\n\n    for (let k = 0; k <= segments; k++) {\n      const f = (2 * Math.PI * k) / segments;\n      const denom = 1 + e * Math.cos(f);\n      if (Math.abs(denom) < 1e-9) continue;\n      const r_km = (a_km * (1 - e ** 2)) / denom;\n      const x_peri = r_km * Math.cos(f);\n      const y_peri = r_km * Math.sin(f);\n      const x = (R11 * x_peri + R12 * y_peri) / AU_KM;\n      const y = (R21 * x_peri + R22 * y_peri) / AU_KM;\n      const z = (R31 * x_peri + R32 * y_peri) / AU_KM;\n      if (Number.isFinite(x + y + z)) pts.push(new THREE.Vector3(x, y, z));\n    }\n    return pts;\n  }, [body, segments]);\n\n  if (!points.length) return null;\n\n  const lineWidth = isSelected ? 2.5 : 1;\n  const opacity = isSelected ? 1.0 : 0.7;\n  const finalColor = isSelected ? \"#ffd500\" : color ?? TYPE_COLORS[body.type];\n\n  return (\n    <Line\n      points={points}\n      lineWidth={lineWidth}\n      color={finalColor}\n      opacity={opacity}\n      transparent\n      depthWrite={false}\n      toneMapped={false}\n      frustumCulled={false}\n    />\n  );\n}\n\n/* ======================= BodyPoint (with big label for selected) ======================= */\nexport function BodyPoint({ body, jd }: { body: Body; jd: number }) {\n  const dotRef = useRef<THREE.Mesh>(null!);\n  const hitRef = useRef<THREE.Mesh>(null!);\n  const { camera } = useThree();\n  const [hovered, setHovered] = useState(false);\n  const color = new THREE.Color(body.color ?? TYPE_COLORS[body.type]);\n  const { selectedBodies } = usePlanetStore.getState();\n  const idOrName = String(body.name && body.name !== \"None\" ? body.name : body.id);\n  const isSelected = selectedBodies.includes(idOrName);\n\n  useFrame(() => {\n    const r = keplerToPositionAU(body, jd);\n    dotRef.current.position.copy(r);\n    hitRef.current.position.copy(r);\n  });\n\n  const displayName = body.name && body.name !== \"None\" ? body.name : body.id;\n\n  return (\n    <group onPointerOver={() => setHovered(true)} onPointerOut={() => setHovered(false)}>\n      <mesh ref={hitRef}>\n        <sphereGeometry args={[0.035, 8, 8]} />\n        <meshBasicMaterial transparent opacity={0} depthWrite={false} />\n      </mesh>\n\n      <mesh ref={dotRef} scale={isSelected ? 1.8 : hovered ? 1.3 : 1.0}>\n        <sphereGeometry args={[0.01, 16, 16]} />\n        <meshBasicMaterial color={color} />\n      </mesh>\n\n      {(hovered || isSelected) && (\n        <Html\n          position={[0, 0.05, 0]}\n          center\n          sprite\n          distanceFactor={10}\n          style={{ pointerEvents: \"none\", transform: \"translate(-50%, -140%)\" }}\n        >\n          <div\n            className={`font-semibold ${\n              isSelected ? \"text-white\" : \"text-gray-300\"\n            }`}\n            style={{\n              fontSize: isSelected ? \"18px\" : \"11px\",\n              letterSpacing: \"0.5px\",\n              textShadow: \"0 0 10px rgba(255,255,255,0.5)\",\n              opacity: isSelected ? 1.0 : 0.75,\n              transition: \"all 0.25s ease\",\n            }}\n          >\n            {displayName}\n          </div>\n        </Html>\n      )}\n    </group>\n  );\n}\n\n/* ======================= Miscellaneous Components ======================= */\nexport function Sun() {\n  return (\n    <mesh>\n      <sphereGeometry args={[0.05, 32, 32]} />\n      <meshBasicMaterial color=\"#ffcc66\" />\n    </mesh>\n  );\n}\n\nexport function Axes({ size = 1.0 }: { size?: number }) {\n  return (\n    <group>\n      <Line points={[new THREE.Vector3(0, 0, 0), new THREE.Vector3(size, 0, 0)]} color=\"#ff5555\" lineWidth={1} />\n      <Line points={[new THREE.Vector3(0, 0, 0), new THREE.Vector3(0, size, 0)]} color=\"#55ff55\" lineWidth={1} />\n      <Line points={[new THREE.Vector3(0, 0, 0), new THREE.Vector3(0, 0, size)]} color=\"#5555ff\" lineWidth={1} />\n    </group>\n  );\n}\n\nexport function CameraRig() {\n  const { camera } = useThree();\n  useEffect(() => {\n    camera.position.set(0, 0, 3.5);\n  }, [camera]);\n  return null;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2135, "column": 0}, "map": {"version":3,"sources":["file:///Users/luispostigo/Documents/Auburn_Research/Guzzetti/GTOC/GTOC_visualizer/GTOC_visualizer/GTOC%20Visualizer/src/components/gtoc/utils/dataLoader.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport * as THREE from \"three\";\nimport { AU_KM, JD_EPOCH_0 } from \"@/components/gtoc/utils/constants\";\n\nexport type BodyType = \"Planet\" | \"Asteroid\" | \"Comet\";\n\nexport interface Body {\n  id: string;\n  name: string;\n  type: BodyType;\n  a_AU: number;\n  e: number;\n  inc: number;\n  Omega: number;\n  omega: number;\n  M0: number;\n  epoch_JD: number;\n  color?: string;\n}\n\n/**\n * Loads and parses a GTOC13 body catalog from CSV.\n * Returns an array of bodies with orbital elements normalized to AU and radians.\n */\nexport function useBodiesFromGTOCCSV(\n  url: string,\n  keepTypes: BodyType[] = [\"Planet\", \"Asteroid\", \"Comet\"]\n) {\n  const [bodies, setBodies] = useState<Body[] | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    let cancelled = false;\n\n    (async () => {\n      try {\n        const resp = await fetch(url, { cache: \"no-store\" });\n        if (!resp.ok) throw new Error(`HTTP ${resp.status} loading ${url}`);\n\n        const text = await resp.text();\n        const lines = text\n          .split(/\\r?\\n/)\n          .map(l => l.trim())\n          .filter(Boolean);\n\n        if (lines.length < 2) throw new Error(\"CSV missing data rows.\");\n\n        const header = lines[0].split(\",\").map(h => h.trim());\n        const out: Body[] = [];\n\n        for (let i = 1; i < lines.length; i++) {\n          const cells = lines[i].split(\",\").map(c => c.trim());\n          if (cells.length !== header.length) continue;\n\n          const rec: Record<string, string> = {};\n          for (let j = 0; j < header.length; j++) rec[header[j]] = cells[j];\n\n          const type = (rec[\"Type\"] ?? \"Asteroid\") as BodyType;\n          if (!keepTypes.includes(type)) continue;\n\n          const a_km = Number(rec[\"a\"]);\n          const e = Number(rec[\"e\"]);\n          const iDeg = Number(rec[\"i\"]);\n          const ODeg = Number(rec[\"Omega\"]);\n          const wDeg = Number(rec[\"omega\"]);\n          const MDeg = Number(rec[\"M\"]);\n\n          if ([a_km, e, iDeg, ODeg, wDeg, MDeg].some(v => !Number.isFinite(v))) continue;\n\n          out.push({\n            id: rec[\"ID\"] || `body-${i}`,\n            name: rec[\"Name\"] || `Body ${i}`,\n            type,\n            a_AU: a_km / AU_KM,\n            e,\n            inc: THREE.MathUtils.degToRad(iDeg),\n            Omega: THREE.MathUtils.degToRad(ODeg),\n            omega: THREE.MathUtils.degToRad(wDeg),\n            M0: THREE.MathUtils.degToRad(MDeg),\n            epoch_JD: JD_EPOCH_0,\n          });\n        }\n\n        if (!cancelled) {\n          setBodies(out);\n          setError(null);\n        }\n      } catch (err: any) {\n        if (!cancelled) {\n          setBodies(null);\n          setError(err.message ?? String(err));\n        }\n      }\n    })();\n\n    return () => {\n      cancelled = true;\n    };\n  }, [url, JSON.stringify(keepTypes)]);\n\n  return { bodies, error };\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;;AAJA;;;;AA0BO,SAAS,qBACd,GAAW,EACX,YAAwB;IAAC;IAAU;IAAY;CAAQ;;IAEvD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAgB;IACpD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAgB;IAElD,IAAA,0KAAS;0CAAC;YACR,IAAI,YAAY;YAEhB;kDAAC;oBACC,IAAI;wBACF,MAAM,OAAO,MAAM,MAAM,KAAK;4BAAE,OAAO;wBAAW;wBAClD,IAAI,CAAC,KAAK,EAAE,EAAE,MAAM,IAAI,MAAM,CAAC,KAAK,EAAE,KAAK,MAAM,CAAC,SAAS,EAAE,KAAK;wBAElE,MAAM,OAAO,MAAM,KAAK,IAAI;wBAC5B,MAAM,QAAQ,KACX,KAAK,CAAC,SACN,GAAG;oEAAC,CAAA,IAAK,EAAE,IAAI;mEACf,MAAM,CAAC;wBAEV,IAAI,MAAM,MAAM,GAAG,GAAG,MAAM,IAAI,MAAM;wBAEtC,MAAM,SAAS,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,GAAG;qEAAC,CAAA,IAAK,EAAE,IAAI;;wBAClD,MAAM,MAAc,EAAE;wBAEtB,IAAK,IAAI,IAAI,GAAG,IAAI,MAAM,MAAM,EAAE,IAAK;4BACrC,MAAM,QAAQ,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,GAAG;wEAAC,CAAA,IAAK,EAAE,IAAI;;4BACjD,IAAI,MAAM,MAAM,KAAK,OAAO,MAAM,EAAE;4BAEpC,MAAM,MAA8B,CAAC;4BACrC,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,MAAM,EAAE,IAAK,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,EAAE;4BAEjE,MAAM,OAAQ,GAAG,CAAC,OAAO,IAAI;4BAC7B,IAAI,CAAC,UAAU,QAAQ,CAAC,OAAO;4BAE/B,MAAM,OAAO,OAAO,GAAG,CAAC,IAAI;4BAC5B,MAAM,IAAI,OAAO,GAAG,CAAC,IAAI;4BACzB,MAAM,OAAO,OAAO,GAAG,CAAC,IAAI;4BAC5B,MAAM,OAAO,OAAO,GAAG,CAAC,QAAQ;4BAChC,MAAM,OAAO,OAAO,GAAG,CAAC,QAAQ;4BAChC,MAAM,OAAO,OAAO,GAAG,CAAC,IAAI;4BAE5B,IAAI;gCAAC;gCAAM;gCAAG;gCAAM;gCAAM;gCAAM;6BAAK,CAAC,IAAI;kEAAC,CAAA,IAAK,CAAC,OAAO,QAAQ,CAAC;kEAAK;4BAEtE,IAAI,IAAI,CAAC;gCACP,IAAI,GAAG,CAAC,KAAK,IAAI,CAAC,KAAK,EAAE,GAAG;gCAC5B,MAAM,GAAG,CAAC,OAAO,IAAI,CAAC,KAAK,EAAE,GAAG;gCAChC;gCACA,MAAM,OAAO,2JAAK;gCAClB;gCACA,KAAK,+JAAe,CAAC,QAAQ,CAAC;gCAC9B,OAAO,+JAAe,CAAC,QAAQ,CAAC;gCAChC,OAAO,+JAAe,CAAC,QAAQ,CAAC;gCAChC,IAAI,+JAAe,CAAC,QAAQ,CAAC;gCAC7B,UAAU,gKAAU;4BACtB;wBACF;wBAEA,IAAI,CAAC,WAAW;4BACd,UAAU;4BACV,SAAS;wBACX;oBACF,EAAE,OAAO,KAAU;wBACjB,IAAI,CAAC,WAAW;4BACd,UAAU;4BACV,SAAS,IAAI,OAAO,IAAI,OAAO;wBACjC;oBACF;gBACF;aAAC;YAED;kDAAO;oBACL,YAAY;gBACd;;QACF;yCAAG;QAAC;QAAK,KAAK,SAAS,CAAC;KAAW;IAEnC,OAAO;QAAE;QAAQ;IAAM;AACzB;GA7EgB","debugId":null}},
    {"offset": {"line": 2247, "column": 0}, "map": {"version":3,"sources":["file:///Users/luispostigo/Documents/Auburn_Research/Guzzetti/GTOC/GTOC_visualizer/GTOC_visualizer/GTOC%20Visualizer/src/components/gtoc/utils/simClock.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  SECONDS_PER_DAY,\n  MILISECONDS_PER_DAY,\n  DAYS_PER_YEAR,\n} from \"@/components/gtoc/utils/constants\";\nimport { useEffect, useRef, useState, useCallback } from \"react\";\n\n/* ============================== Helpers ============================== */\n\n/** Clamps a number between optional bounds. */\nexport function clamp(v: number, lo?: number, hi?: number) {\n  if (lo != null && v < lo) return lo;\n  if (hi != null && v > hi) return hi;\n  return v;\n}\n\n/** Converts Date ‚Üí Julian Date. */\nexport function dateToJD(date: Date): number {\n  return date.getTime() / MILISECONDS_PER_DAY + 2440587.5;\n}\n\n/** Converts Julian Date ‚Üí Date. */\nexport function jdToDate(jd: number): Date {\n  return new Date((jd - 2440587.5) * MILISECONDS_PER_DAY);\n}\n\n/** Builds an array of JD milestones between start and end. */\nexport function buildMilestonesByStep(\n  jdStart: number,\n  jdEnd: number,\n  stepDays: number\n): number[] {\n  const out: number[] = [];\n  const dir = Math.sign(jdEnd - jdStart) || 1;\n  const step = Math.abs(stepDays) * dir;\n  let jd = jdStart;\n\n  if (dir > 0) {\n    while (jd <= jdEnd) {\n      out.push(jd);\n      jd += step;\n    }\n  } else {\n    while (jd >= jdEnd) {\n      out.push(jd);\n      jd += step;\n    }\n  }\n\n  if (out[out.length - 1] !== jdEnd) out.push(jdEnd);\n  return out;\n}\n\n/** Creates a JD range centered at `centerJD` with ¬±`years`. */\nexport function makeJDRangeFromYears(centerJD: number, years: number) {\n  const days = years * DAYS_PER_YEAR;\n  return { jdMin: centerJD - days, jdMax: centerJD + days };\n}\n\n/* ============================ useSimClock ============================ */\n\nexport type SimClockOpts = {\n  jd0?: number;\n  jdMin?: number;\n  jdMax?: number;\n  milestones?: number[];\n  snapPlayToMilestones?: boolean;\n  milestoneStepsPerSec?: number;\n  playing?: boolean;\n  /** Rate in days per second (default: 50). */\n  rate0?: number;\n};\n\n/**\n * Simulation clock that advances Julian Date continuously or by discrete milestones.\n * Internally runs a single requestAnimationFrame loop for stable timing.\n */\nexport function useSimClock(opts: SimClockOpts = {}) {\n  const {\n    jd0,\n    jdMin,\n    jdMax,\n    milestones,\n    snapPlayToMilestones = false,\n    milestoneStepsPerSec = 2,\n    playing = true,\n    rate0 = 50,\n  } = opts;\n\n  const [jd, _setJD] = useState<number>(() =>\n    clamp(jd0 ?? dateToJD(new Date()), jdMin, jdMax)\n  );\n  const [isPlaying, _setPlaying] = useState<boolean>(playing);\n  const [rate, _setRate] = useState<number>(rate0); // days per second\n\n  /* Refs to avoid stale closures */\n  const jdRef = useRef(jd);\n  const rateRef = useRef(rate);\n  const playingRef = useRef(isPlaying);\n  const minJDRef = useRef(jdMin);\n  const maxJDRef = useRef(jdMax);\n  const milestonesRef = useRef(milestones);\n  const snapRef = useRef(snapPlayToMilestones);\n  const stepPerSecRef = useRef(milestoneStepsPerSec);\n  const lastGoodRateRef = useRef(rate0 > 0 ? rate0 : 1);\n  const idxRef = useRef(0);\n  const rafRef = useRef<number | null>(null);\n  const lastTsRef = useRef<number | null>(null);\n\n  /* Sync state to refs */\n  useEffect(() => {\n    jdRef.current = jd;\n  }, [jd]);\n  useEffect(() => {\n    rateRef.current = rate;\n    if (Number.isFinite(rate) && rate > 0) lastGoodRateRef.current = rate;\n  }, [rate]);\n  useEffect(() => {\n    playingRef.current = isPlaying;\n  }, [isPlaying]);\n  useEffect(() => {\n    minJDRef.current = jdMin;\n  }, [jdMin]);\n  useEffect(() => {\n    maxJDRef.current = jdMax;\n  }, [jdMax]);\n  useEffect(() => {\n    milestonesRef.current = milestones;\n  }, [milestones]);\n  useEffect(() => {\n    snapRef.current = snapPlayToMilestones;\n  }, [snapPlayToMilestones]);\n  useEffect(() => {\n    stepPerSecRef.current = milestoneStepsPerSec;\n  }, [milestoneStepsPerSec]);\n\n  /* State setters */\n  const setJD = useCallback((v: number | ((prev: number) => number)) => {\n    _setJD(prev => {\n      const raw = typeof v === \"function\" ? (v as (p: number) => number)(prev) : v;\n      const lo = minJDRef.current ?? -Infinity;\n      const hi = maxJDRef.current ?? Infinity;\n      const next = clamp(raw, lo, hi);\n      jdRef.current = next;\n      return next;\n    });\n  }, []);\n\n  const setRate = useCallback((v: number) => {\n    _setRate(v);\n    rateRef.current = v;\n    if (Number.isFinite(v) && v > 0) lastGoodRateRef.current = v;\n  }, []);\n\n  const setPlaying = useCallback((v: boolean) => {\n    _setPlaying(v);\n    playingRef.current = v;\n    if (!v) lastTsRef.current = null;\n  }, []);\n\n  /* Keeps milestone index near current jd */\n  useEffect(() => {\n    const ms = milestonesRef.current;\n    if (!ms?.length) return;\n    let best = 0;\n    let bd = Infinity;\n    for (let k = 0; k < ms.length; k++) {\n      const d = Math.abs(ms[k] - jdRef.current);\n      if (d < bd) {\n        bd = d;\n        best = k;\n      }\n    }\n    idxRef.current = best;\n  }, [milestones, jd]);\n\n  /* Main RAF loop */\n  useEffect(() => {\n    function tick(ts: number) {\n      if (lastTsRef.current == null) lastTsRef.current = ts;\n      const prevTs = lastTsRef.current;\n      lastTsRef.current = ts;\n      const dtSec = Math.max(0, (ts - prevTs) / 1000);\n\n      if (playingRef.current) {\n        const lo = minJDRef.current ?? -Infinity;\n        const hi = maxJDRef.current ?? Infinity;\n\n        if (snapRef.current && milestonesRef.current?.length) {\n          const ms = milestonesRef.current;\n          const maxIdx = ms.length - 1;\n          let idx = idxRef.current + stepPerSecRef.current * dtSec;\n          idx = clamp(idx, 0, maxIdx);\n          idxRef.current = idx;\n\n          const jdSnap = ms[Math.round(idx)];\n          const next = clamp(jdSnap, lo, hi);\n          _setJD(next);\n          jdRef.current = next;\n\n          if (next <= lo || next >= hi || Math.round(idx) === 0 || Math.round(idx) === maxIdx) {\n            _setPlaying(false);\n            playingRef.current = false;\n          }\n        } else {\n          const r =\n            Number.isFinite(rateRef.current) && rateRef.current > 0\n              ? rateRef.current\n              : lastGoodRateRef.current;\n\n          if (r > 0) {\n            let next = jdRef.current + r * dtSec;\n            next = clamp(next, lo, hi);\n            _setJD(next);\n            jdRef.current = next;\n\n            if ((next === hi && r > 0) || (next === lo && r < 0)) {\n              _setPlaying(false);\n              playingRef.current = false;\n            }\n          }\n        }\n      } else {\n        lastTsRef.current = ts; // paused: avoids dt spike\n      }\n\n      rafRef.current = requestAnimationFrame(tick);\n    }\n\n    rafRef.current = requestAnimationFrame(tick);\n    return () => {\n      if (rafRef.current != null) cancelAnimationFrame(rafRef.current);\n      rafRef.current = null;\n      lastTsRef.current = null;\n    };\n  }, []);\n\n  return { jd, setJD, isPlaying, setPlaying, rate, setRate };\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2497, "column": 0}, "map": {"version":3,"sources":["file:///Users/luispostigo/Documents/Auburn_Research/Guzzetti/GTOC/GTOC_visualizer/GTOC_visualizer/GTOC%20Visualizer/src/components/gtoc/BodySelector.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useMemo } from \"react\";\nimport { usePlanetStore } from \"./stores/planetStore\";\n\nexport default function BodySelector() {\n  const { planets = [], selectedBodies = [], togglePlanet, setPlanets } = usePlanetStore();\n  const [open, setOpen] = useState(false);\n  const [query, setQuery] = useState(\"\");\n\n  // === helper to clear all selections ===\n  const clearAll = () => {\n    usePlanetStore.setState({ selectedBodies: [] });\n  };\n\n  const isNumericQuery = /^\\d+$/.test(query.trim());\n  const hasQuery = query.trim().length > 0;\n\n  const filtered = useMemo(() => {\n    const q = query.trim().toLowerCase();\n    return planets.filter((b) => {\n      const name = (b.name || \"\").toLowerCase();\n      const type = (b.type || \"\").toLowerCase();\n      const hasValidName = name && name !== \"none\" && name !== \"\";\n      if (!hasQuery) return type === \"planet\" && hasValidName;\n      if (!isNumericQuery) return type === \"planet\" && hasValidName && name.includes(q);\n      return String(b.id ?? \"\").toLowerCase().includes(q);\n    });\n  }, [planets, query, isNumericQuery, hasQuery]);\n\n  return (\n    <div className=\"fixed top-5 left-5 z-[9999] text-white font-sans pointer-events-auto select-none flex flex-col space-y-2\">\n      {/* === Menu + Clear buttons === */}\n      <div className=\"flex items-center space-x-2\">\n        <button\n          onClick={() => setOpen(!open)}\n          className={`flex items-center justify-between w-[160px]\n                      px-3 py-2 rounded-lg backdrop-blur-md transition-all duration-300\n                      border border-white/10 bg-white/5 hover:bg-white/10\n                      shadow-[0_0_10px_rgba(255,255,255,0.08)]\n                      ${open ? \"border-gray-400/30\" : \"border-gray-700/40\"}`}\n        >\n          <span className=\"text-[12px] tracking-widest font-semibold text-white/80\">\n            {open ? \"CLOSE\" : \"BODIES\"}\n          </span>\n          <span\n            className={`transition-transform duration-300 text-[12px] text-gray-400 ${\n              open ? \"rotate-180\" : \"rotate-0\"\n            }`}\n          >\n            ‚ñº\n          </span>\n        </button>\n\n        {selectedBodies.length > 0 && (\n          <button\n            onClick={clearAll}\n            className=\"px-3 py-2 rounded-lg text-[11px] font-semibold text-red-300\n                       border border-red-400/30 bg-red-500/10 hover:bg-red-500/20\n                       backdrop-blur-md shadow-[0_0_8px_rgba(255,0,0,0.3)] transition-all\"\n          >\n            CLEAR\n          </button>\n        )}\n      </div>\n\n      {/* === Drawer panel === */}\n      <div\n        className={`transition-all duration-500 overflow-hidden origin-top ${\n          open ? \"max-h-[55vh] opacity-100 mt-1\" : \"max-h-0 opacity-0 mt-0\"\n        }`}\n      >\n        <div\n          className=\"rounded-lg border border-white/10 bg-white/[0.03]\n                     backdrop-blur-2xl p-3 shadow-[0_0_20px_rgba(0,0,0,0.3)]\n                     max-h-[55vh] overflow-y-auto w-[220px]\n                     scrollbar-thin scrollbar-thumb-white/20 scrollbar-track-transparent\"\n        >\n          {/* === Search bar === */}\n          <input\n            type=\"text\"\n            placeholder=\"Search planet or ID...\"\n            value={query}\n            onChange={(e) => setQuery(e.target.value)}\n            className=\"w-full mb-3 px-2 py-1.5 rounded-md bg-white/5 border border-white/10 \n                       text-xs text-white placeholder-gray-400 focus:outline-none\n                       focus:border-white/30 focus:bg-white/10 transition-all\"\n          />\n\n          {/* === Body list === */}\n          {filtered.length > 0 ? (\n            <div className=\"flex flex-col space-y-1\">\n              {filtered.map((body, idx) => {\n                const key = `${body.id ?? body.name ?? \"unknown\"}-${idx}`;\n                const identifier = String(body.name && body.name !== \"None\" ? body.name : body.id);\n                const isChecked = selectedBodies.includes(identifier);\n                const isPlanet = body.type?.toLowerCase() === \"planet\";\n                const displayLabel =\n                  isPlanet && body.name && body.name !== \"None\" ? body.name : body.id || \"Unnamed\";\n\n                return (\n                  <label\n                    key={key}\n                    onClick={() => togglePlanet(identifier)}\n                    className={`flex items-center justify-between px-2 py-1.5 rounded-md cursor-pointer\n                                border transition-all duration-150 text-xs\n                                ${\n                                  isChecked\n                                    ? \"border-white/20 bg-white/[0.08]\"\n                                    : \"border-transparent hover:bg-white/[0.03]\"\n                                }`}\n                  >\n                    <div className=\"flex items-center space-x-2\">\n                      <div\n                        className={`w-3.5 h-3.5 border rounded-sm flex items-center justify-center\n                                    ${\n                                      isChecked\n                                        ? \"border-white bg-white/30\"\n                                        : \"border-gray-500/50\"\n                                    }`}\n                      >\n                        {isChecked && <div className=\"w-1.5 h-1.5 bg-white rounded-sm\" />}\n                      </div>\n                      <span className={isChecked ? \"text-white\" : \"text-gray-300\"}>\n                        {displayLabel}\n                      </span>\n                    </div>\n\n                    <div\n                      className=\"w-2.5 h-2.5 rounded-full\"\n                      style={{\n                        background: body.color ?? \"#888\",\n                        boxShadow: `0 0 5px ${\n                          body.color ?? \"#888\"\n                        }55, inset 0 0 2px #000`,\n                      }}\n                    />\n                  </label>\n                );\n              })}\n            </div>\n          ) : (\n            <div className=\"text-gray-400 text-[11px] italic mt-3\">\n              {isNumericQuery\n                ? \"No bodies found with that ID\"\n                : \"No planets found with that name\"}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2718, "column": 0}, "map": {"version":3,"sources":["file:///Users/luispostigo/Documents/Auburn_Research/Guzzetti/GTOC/GTOC_visualizer/GTOC_visualizer/GTOC%20Visualizer/src/components/gtoc/viewerCanvas.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useState, useMemo } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { Canvas } from \"@react-three/fiber\";\nimport { OrbitControls, Stars } from \"@react-three/drei\";\nimport * as THREE from \"three\";\n\nimport { SolutionsUI, Solutions3D } from \"@/components/gtoc/solutions\";\nimport HUD from \"@/components/gtoc/sceneParts/HUD\";\nimport BodyPoint from \"@/components/gtoc/sceneParts/BodyPoint\";\nimport { OrbitPath, Sun, Axes, CameraRig } from \"@/components/gtoc/KeplerSolver\";\nimport {\n  TYPE_COLORS,\n  JD_EPOCH_0,\n  DAYS_PER_YEAR,\n} from \"@/components/gtoc/utils/constants\";\nimport { useBodiesFromGTOCCSV } from \"@/components/gtoc/utils/dataLoader\";\nimport { useSimClock } from \"@/components/gtoc/utils/simClock\";\nimport type { HoverPayload } from \"@/components/gtoc/solutions/SolutionPath\";\nimport BodySelector from \"@/components/gtoc/BodySelector\";\nimport { usePlanetStore } from \"@/components/gtoc/stores/planetStore\";\n\ntype HoverState = { data: HoverPayload; x: number; y: number } | null;\n\nexport default function ViewerCanvas(props = {}) {\n  const usingExternalClock =\n    \"jd\" in props &&\n    \"setJD\" in props &&\n    \"isPlaying\" in props &&\n    \"setPlaying\" in props &&\n    \"rate\" in props &&\n    \"setRate\" in props;\n\n  const { jd, setJD, isPlaying, setPlaying, rate, setRate } = usingExternalClock\n    ? (props as any)\n    : useSimClock();\n\n  const bodiesHook = useBodiesFromGTOCCSV(\"/data/df_extracted_full.csv\", [\n    \"Planet\",\n    \"Asteroid\",\n    \"Comet\",\n  ]);\n  const bodies = (props as any).bodies ?? bodiesHook.bodies ?? [];\n  const hookError = bodiesHook.error;\n\n  const { setPlanets, selectedBodies } = usePlanetStore();\n\n  useEffect(() => {\n    if (bodies && bodies.length > 0) {\n      const mapped = bodies\n        .filter((b: any) => b && (b.name || b.id))\n        .map((b: any) => ({\n          id: b.id,\n          name: b.name || String(b.id),\n          type: b.type,\n          color:\n            b.color ?? TYPE_COLORS[b.type as \"Planet\" | \"Asteroid\" | \"Comet\"],\n        }));\n      setPlanets(mapped);\n    }\n  }, [bodies, setPlanets]);\n\n  const [hover, setHover] = useState<HoverState>(null);\n\n  const bodyName = useMemo(() => {\n    const m = new Map<number, string>();\n    bodies?.forEach((b: any) => {\n      const idNum = Number(b.id);\n      const nm = (b.name && String(b.name).trim()) || `#${idNum || \"?\"}`;\n      if (!Number.isNaN(idNum)) m.set(idNum, nm);\n    });\n    return m;\n  }, [bodies]);\n\n  const tooltip = hover && (\n    <div\n      className=\"pointer-events-none fixed z-[2147483646] select-none\"\n      style={{ left: hover.x + 14, top: hover.y + 16 }}\n    >\n      <div\n        className=\"rounded-xl p-[1px]\"\n        style={{\n          background: `linear-gradient(135deg, ${hover.data.color}99 0%, rgba(255,255,255,0.2) 70%)`,\n          boxShadow: \"0 6px 20px rgba(0,0,0,0.35)\",\n        }}\n      >\n        <div className=\"rounded-xl backdrop-blur-md bg-black/85 px-3 py-2 text-[11px] text-white min-w-[200px] border border-white/10 shadow-2xl\">\n          <div className=\"flex items-center justify-center mb-2\">\n            <span\n              className=\"inline-block h-2.5 w-2.5 rounded-full ring-2 ring-white/30 mr-2\"\n              style={{ backgroundColor: hover.data.color }}\n            />\n            <div className=\"font-semibold text-white/90 truncate\">\n              {hover.data.solutionName}\n            </div>\n          </div>\n          <div className=\"text-xs text-center text-white/70 mb-1\">\n            {hover.data.fromBody\n              ? bodyName.get(hover.data.fromBody) ?? `#${hover.data.fromBody}`\n              : \"‚Äî\"}{\" \"}\n            <span className=\"opacity-50\">‚Üí</span>{\" \"}\n            {hover.data.toBody\n              ? bodyName.get(hover.data.toBody) ?? `#${hover.data.toBody}`\n              : \"‚Äî\"}\n          </div>\n          <div className=\"mt-1 pt-1 border-t border-white/10 text-[10px] text-white/60 text-center\">\n            Leg {hover.data.legIndex} ‚Ä¢ TOF {hover.data.tofDays.toFixed(1)} days\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"relative w-full h-screen bg-black\">\n      <BodySelector />\n      <SolutionsUI />\n\n      <Canvas\n        dpr={[1, 2]}\n        camera={{ fov: 65, near: 0.001, far: 1e12, position: [0, 0, 2e6] }}\n      >\n        <color attach=\"background\" args={[\"#000\"]} />\n        <ambientLight intensity={0.6} />\n        <pointLight position={[0, 0, 0]} intensity={2.0} color=\"#fff\" />\n\n        <CameraRig />\n        <OrbitControls enableDamping dampingFactor={0.1} />\n        <Stars radius={100} depth={50} count={1000} factor={2} fade speed={0.5} />\n\n        <Sun />\n        <Axes size={1.0} />\n\n        {bodies\n          ?.filter((b: any) => b && (b.name || b.id) && b.a_AU && b.e !== undefined)\n          .map((b: any, idx: number) => {\n            const idOrName = String(b.name && b.name !== \"None\" ? b.name : b.id);\n            const isSelected = selectedBodies.includes(idOrName);\n            const showOrbit = b.type === \"Planet\" || isSelected;\n\n            return (\n              <group key={String(b.id ?? b.name ?? idx)}>\n                {showOrbit && (\n                  <OrbitPath\n                    body={b}\n                    visible\n                    segments={256}\n                    color={\n                      b.color ?? TYPE_COLORS[b.type as \"Planet\" | \"Asteroid\" | \"Comet\"]\n                    }\n                    isSelected={isSelected}\n                  />\n                )}\n                <BodyPoint body={b} jd={jd} showLabel={isSelected || b.type === \"Planet\"} />\n              </group>\n            );\n          })}\n\n        <Solutions3D\n          currentJD={jd}\n          epochZeroJD={JD_EPOCH_0}\n          showShip\n          onHover={(data, x, y) => setHover({ data, x, y })}\n          onUnhover={() => setHover(null)}\n        />\n      </Canvas>\n\n      {tooltip}\n\n      <PortalHUD>\n        <div className=\"pointer-events-auto fixed left-1/2 -translate-x-1/2 bottom-2 z-[999] w-full max-w-[120rem] px-3\">\n          <HUD\n            jd={jd}\n            setJD={setJD}\n            isPlaying={isPlaying}\n            setPlaying={setPlaying}\n            rate={rate}\n            setRate={setRate}\n            candidates={[]}\n            jdMin={JD_EPOCH_0}\n            jdMax={JD_EPOCH_0 + 200 * DAYS_PER_YEAR}\n            milestonesJD={\n              (props as any).milestonesJD ?? [\n                JD_EPOCH_0,\n                JD_EPOCH_0 + 50 * DAYS_PER_YEAR,\n                JD_EPOCH_0 + 100 * DAYS_PER_YEAR,\n              ]\n            }\n            milestonesISO={\n              (props as any).milestonesISO ?? [\n                \"2000-01-01\",\n                \"2050-01-01\",\n                \"2100-01-01\",\n              ]\n            }\n          />\n        </div>\n      </PortalHUD>\n\n      {hookError && (\n        <div className=\"absolute top-16 right-3 z-[80] text-xs pointer-events-none\">\n          <div className=\"px-3 py-2 rounded bg-red-600 text-white shadow\">\n            {hookError}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction PortalHUD({ children }: { children: React.ReactNode }) {\n  const [mounted, setMounted] = useState(false);\n  useEffect(() => setMounted(true), []);\n  if (!mounted) return null;\n  return createPortal(children, document.body);\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}